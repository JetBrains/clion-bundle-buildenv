pkgname=(mpfr{,-dev})
pkgver=4.2.0
pkgrel=1
pkgdesc="C library for multiple-precision floating-point computations"
arch=(aarch64 x86_64 universal)
url="https://www.mpfr.org"
license=("LGPL-3.0")

options=('!staticlibs' 'strip')
source=("https://ftp.gnu.org/gnu/mpfr/mpfr-$pkgver.tar.xz")
sha256sums=('06a378df13501248c1b2db5aa977a2c8126ae849a9d9b7be2546fb4a9c26d993')

depends=(gmp)
makedepends=(gmp{,-dev})

build() {
  [[ -d "${srcdir}/build-${CHOST}" ]] && rm -rf "${srcdir}/build-${CHOST}"
  mkdir -p "${srcdir}/build-${CHOST}"
  cd "${srcdir}/build-${CHOST}"

  ../${pkgname}-${pkgver}/configure \
    --host=${CHOST} \
    --build=${MACHTYPE} \
    --prefix=/ \
    --disable-dependency-tracking \
    --disable-silent-rules \
    --with-gmp="$MAKEDEPENDS"

  install_for_package
}

package_dylib_with_dev
